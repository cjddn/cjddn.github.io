---
layout: default
title: 03 POST요청으로 데이터 insert하기
parent: 02 Node.js로 TodoList만들고 배포하기
nav_order: 3
---

# POST요청으로 데이터 insert하기
{: .no_toc } 
{: .fs-6 .fw-300 }

## 목차
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## insert함수 생성하기
```js
//index.js

...
const database = client.db('todo');
const collection = database.collection('post');
let autoIncrement = await collection.countDocuments({}, { hint: "_id_" }) + 1;
const insertResult = await collection.insertOne({id: autoIncrement, a: 1});
console.log('저장 결과 =>', insertResult);
...
```
`main` 함수 내의 해당 5줄의 코드를 다른 함수로 옮겨주세요.
```js
//index.js

...
async function insertData(){
    const database = client.db('todo');
    const collection = database.collection('post');
    let autoIncrement = await collection.countDocuments({}, { hint: "_id_" }) + 1;
    const insertResult = await collection.insertOne({id: autoIncrement, a: 1});
    console.log('저장 결과 =>', insertResult);
}
...
```
저는 `insertData`라는 함수를 생성하여 옮겼습니다.

## ejs 파일 만들기

터미널에 `npm install ejs`를 입력해주세요.
```js
    // index.js
    ...
    app.set('view engine', 'ejs');
```
`index.js` 상단에 해당 코드를 추가해주세요.

프로젝트 폴더 내에 `views` 폴더를 생성 후 `index.ejs` 파일을 생성해주세요

